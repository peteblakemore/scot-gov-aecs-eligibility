{% extends "sg-prototype-templates/layouts/_base-layout.njk" %}

{% block pageTitle %}Scheme options{% endblock %}

{% block main %}
<div class="ds_wrapper">
    <header class="ds_page-header">
        <h1 class="ds_page-header__title">Scheme options for your holding</h1>
    </header>

    <div class="ds_layout__content">
        <p>Based on holding number 1234, there are {{ schemeDetails | length }} schemes you may be able to apply for, provided you meet the eligibility criteria.</p>

        <form action="/version-10/selected-schemes" method="POST" id="schemes-form">
            <!-- Arable Options -->
            <section class="scheme-category">
                <h2>Arable Options</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'arable' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Grassland Options -->
            <section class="scheme-category">
                <h2>Grassland Options</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'grassland' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Upland and Moorland Options -->
            <section class="scheme-category">
                <h2>Upland and Moorland Options</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'upland' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Wetland and Bog Options -->
            <section class="scheme-category">
                <h2>Wetland and Bog Options</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'wetland' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Farm Habitats and Features -->
            <section class="scheme-category">
                <h2>Farm Habitats and Features</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'habitats' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Water Quality and Management -->
            <section class="scheme-category">
                <h2>Water Quality and Management</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'water' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>

            <!-- Organic Farming -->
            <section class="scheme-category">
                <h2>Organic Farming</h2>
                {% for schemeName, scheme in schemeDetails %}
                    {% if scheme.category == 'organic' %}
                        <div class="ds_scheme-option">
                            <div class="ds_checkbox">
                                <input class="ds_checkbox__input" 
                                       id="scheme-{{ loop.index }}" 
                                       name="selected-schemes" 
                                       type="checkbox" 
                                       value="{{ schemeName }}">
                                <label class="ds_checkbox__label" for="scheme-{{ loop.index }}">
                                    {{ schemeName }}
                                </label>
                            </div>
                            <p class="scheme-description">{{ scheme.description }}</p>
                            <p class="scheme-rate">Rate: {{ scheme.funding }}</p>
                        </div>
                    {% endif %}
                {% endfor %}
            </section>
        </form>
    </div>
</div>

<div class="ds_fixed-button-bar" id="fixed-button-bar">
    <div class="ds_wrapper">
        <div class="button-bar-content">
            <button class="ds_button" type="submit" form="schemes-form">
                Calculate funding for selected options
            </button>
            <a href="#" class="ds_link" onclick="unselectAll(event)">Clear all options</a>
        </div>
    </div>
</div>

<style>
    .scheme-category {
        margin-bottom: 3rem;
    }

    .scheme-category h2 {
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #333;
    }

    .ds_scheme-option {
        margin-bottom: 1.5rem;
        padding: 1.5rem;
        background-color: #f8f8f8;
        border-radius: 4px;
    }

    .scheme-description {
        margin: 1rem 0;
        color: #333;
    }

    .scheme-rate {
        font-weight: bold;
        color: #1d70b8;
    }

    .ds_fixed-button-bar {
        position: sticky;
        bottom: 0;
        background: white;
        padding: 1rem 0;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    }

    .button-bar-content {
        display: flex;
        align-items: center;
        gap: 24px;
    }

    .ds_link {
        color: #0065bd;
        text-decoration: underline;
    }

    .ds_button {
        margin-top: 1rem;
        margin-bottom: 1rem;
    }
</style>

<script>
    function unselectAll(e) {
        e.preventDefault();
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.checked = false;
        });
    }
</script>
{% endblock %}